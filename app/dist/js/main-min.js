(()=>{window.qs=((e,t)=>(t||document).querySelector(e));const e=qs(".pickup-line-box"),t=qs(".loader");qs(".fab").addEventListener("click",()=>{t.classList.remove("hidden"),c(s)});const s=s=>{t.classList.add("hidden"),e.innerHTML=i(s)},i=e=>"<div class='fadeIn'>"+`<p class="pickup-line">${e}</p>`+'<cite class="author">Anonymous</cite></div>',c=e=>{fetch("https://pickup-lines.herokuapp.com/api/random").then(e=>e.json()).then(t=>{const{data:s}=t;e(s)}).catch(e=>console.log(e.message))};c(s),new class{constructor(){this.idb=idb.open("pickup-lines",1,e=>this._upgradeDB(e)),this.STORE_LINES="lines"}_upgradeDB(e){switch(e.oldVersion){case 0:e.createObjectStore(this.STORE_LINES)}}getAll(){return this.idb.then(e=>e.transaction(this.STORE_LINES).objectStore(this.STORE_LINES).getAll())}create(e){this.idb.then(t=>{const s=t.transaction(this.STORE_LINES,"readwrite");return s.objectStore(this.STORE_LINES).put(e),s.complete})}}})();